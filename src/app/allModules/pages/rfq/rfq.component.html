<div id="rfq-creation" fxFlex fusePerfectScrollbar>
    <div fxLayout="column" fxLayoutAlign="start center" class="py-8 pl-24">
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1rem" style="width: 100%;">
            <button mat-icon-button (click)="CancelClicked()">
                <img src="assets/images/rfq/backbutton.svg" style="width: 24px;">
            </button>
            <label class="title">Create RFx</label>
            <div fxFlex></div>
            <div fxLayout="row" fxLayoutAlign="end center" fxFlex class="mr-16" *ngIf="Rfxheader.Status=='1' || RFxID==null">
                <button *ngIf="Permission=='3' || Permission=='2'" mat-button style="background-color: transparent;" (click)="SaveRFxClicked(false)">
                    <img src="/assets/images/rfq/saveAsDraft.svg">
                    <span class="saveAsDraft">Save as Draft</span>
                </button>
                <!-- <button *ngIf="RFxID!='-1' && RFxID" mat-button (click)="DeleteClicked()"
                    style="background-color: transparent;">
                    <img src="/assets/images/delete.png">
                    <span class="delete">Delete</span>
                </button> -->
                <button mat-button (click)="CancelClicked()" style="background-color: transparent;">
                    <img src="/assets/images/cancel.png">
                    <span class="cancel">Cancel</span>
                </button>
            </div>
        </div>
        <div class="container mt-8 p-8">
            <mat-tab-group [(selectedIndex)]="selectedIndex" color="accent" backgroundColor="primary" class="tab-group">
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[0]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>General data</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <form autocomplete="off" [formGroup]="RFxFormGroup">
                            <div fxLayout="column" fxLayoutGap="8px">
                                <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                    <mat-form-field fxFlex="724px" class="rfx-form-field" appearance="outline">
                                        <mat-label>Title</mat-label>
                                        <input matInput type="text" formControlName="RfqTitle" fxFlex>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('RfqTitle').touched && RFxFormGroup.get('RfqTitle').hasError('required')">
                                            Title is required
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                    <mat-form-field fxFlex="350px" appearance="outline" class="rfx-form-field">
                                        <mat-label>RFx type</mat-label>
                                        <mat-select formControlName="RfqType" fxFlex disableOptionCentering
                                            panelClass="myPanelClass">
                                            <mat-option *ngFor="let type of RFxTypeMasters" [value]="type.RFQType">
                                                {{type.Text}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('RfqType').touched && RFxFormGroup.get('RfqType').hasError('required')">
                                            RFx Type is required
                                        </mat-error>
                                    </mat-form-field>

                                    <mat-form-field fxFlex="350px" appearance="outline" class="rfx-form-field">
                                        <mat-label>Group</mat-label>
                                        <mat-select formControlName="RfqGroup" fxFlex disableOptionCentering
                                            panelClass="myPanelClass">
                                            <mat-option *ngFor="let group of RFxGroupMasters" [value]="group.RFQGroup">
                                                {{group.Text}}</mat-option>
                                        </mat-select>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('RfqGroup').touched && RFxFormGroup.get('RfqGroup').hasError('required')">
                                            Group is required
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                    <mat-form-field fxFlex="350px" appearance="outline" class="rfx-form-field">
                                        <mat-label>Minimum no. of evaluators</mat-label>
                                        <input matInput formControlName="Evaluator"
                                            oninput="this.value = Math.abs(this.value)" fxFlex type="number">
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('Evaluator').touched && RFxFormGroup.get('Evaluator').hasError('required')">
                                            Minimum no. of evaluators is required
                                        </mat-error>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('Evaluator').touched && RFxFormGroup.get('Evaluator').hasError('max')">
                                            Only {{Evaluators.length}} evaluators are there
                                        </mat-error>
                                    </mat-form-field>
                                    <mat-form-field fxFlex="350px" appearance="outline" class="rfx-form-field">
                                        <mat-label>Currency</mat-label>
                                        <mat-select formControlName="Currency" fxFlex disableOptionCentering
                                            panelClass="myPanelClass">
                                            <mat-option *ngFor="let currency of CurrencyList" [value]="currency">
                                                {{currency}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('Currency').touched && RFxFormGroup.get('Currency').hasError('required')">
                                            Currency is required
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                    <mat-form-field fxFlex="350px" appearance="outline" class="rfx-form-field">
                                        <mat-label>Plant</mat-label>
                                        <mat-select formControlName="Plant" fxFlex disableOptionCentering
                                            panelClass="myPanelClass">
                                            <mat-option *ngFor="let plant of Plants" [value]="plant">
                                                {{plant}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error
                                            *ngIf="RFxFormGroup.get('Plant').touched && RFxFormGroup.get('Plant').hasError('required')">
                                            Site is required
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="24px">
                                    <div fxLayout="column" fxLayoutGap="8px">
                                        <span class="datetime">Validity</span>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field fxFlex="163px" appearance="outline" class="rfx-form-field">
                                                <input [min]="minDate" matInput [matDatepicker]="picker1"
                                                    formControlName="ValidityStartDate" fxFlex placeholder="Sart Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker1.open()">
                                                <mat-datepicker #picker1></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ValidityStartDate').touched && RFxFormGroup.get('ValidityStartDate').hasError('required')">
                                                    Validity start date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker9"
                                                    formControlName="ValidityStartTime" fxFlex placeholder="Start Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker9></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ValidityStartTime').touched && RFxFormGroup.get('ValidityStartTime').hasError('required')">
                                                    Validity start time is required
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [min]="RFxFormGroup.get('ValidityStartDate').value"
                                                    [matDatepicker]="picker2" formControlName="ValidityEndDate" fxFlex
                                                    placeholder="End Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker2.open()">
                                                <mat-datepicker #picker2></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ValidityEndDate').touched && RFxFormGroup.get('ValidityEndDate').hasError('required')">
                                                    Validity end date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker10"
                                                    formControlName="ValidityEndTime" fxFlex placeholder="End Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker10></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ValidityEndTime').touched && RFxFormGroup.get('ValidityEndTime').hasError('required')">
                                                    Validity end time is required
                                                </mat-error>
                                                <mat-error *ngIf="!RFxFormGroup.get('ValidityEndTime').hasError('required') &&
                                                RFxFormGroup.get('ValidityEndTime').hasError('EndTimeValidator')">
                                                    Please enter valid time
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div fxLayout="column" fxLayoutGap="8px">
                                        <span class="datetime">Response</span>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [min]="RFxFormGroup.get('ValidityStartDate').value"
                                                    [max]="RFxFormGroup.get('ValidityEndDate').value"
                                                    [matDatepicker]="picker3" formControlName="ResponseStartDate" fxFlex
                                                    placeholder="Start Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker3.open()">
                                                <mat-datepicker #picker3></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ResponseStartDate').touched && RFxFormGroup.get('ResponseStartDate').hasError('required')">
                                                    Response Start Date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker6"
                                                    formControlName="ResponseStartTime" fxFlex placeholder="Start Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker6></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="!RFxFormGroup.get('ResponseStartTime').hasError('required') &&
                                                RFxFormGroup.get('ResponseStartTime').hasError('ResStartTimeValidator')">
                                                    Please enter valid time
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [min]="RFxFormGroup.get('ResponseStartDate').value"
                                                    [max]="RFxFormGroup.get('ValidityEndDate').value"
                                                    [matDatepicker]="picker4" formControlName="ResponseEndDate" fxFlex
                                                    placeholder="End Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker4.open()">
                                                <mat-datepicker #picker4></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ResponseEndDate').touched && RFxFormGroup.get('ResponseEndDate').hasError('required')">
                                                    Response End Date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker7"
                                                    formControlName="ResponseEndTime" fxFlex placeholder="End Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker7></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('ResponseEndTime').touched && RFxFormGroup.get('ResponseEndTime').hasError('required')">
                                                    Response End Time is required
                                                </mat-error>
                                                <mat-error *ngIf="!RFxFormGroup.get('ResponseEndTime').hasError('required') &&
                                                RFxFormGroup.get('ResponseEndTime').hasError('ResEndTimeValidator')">
                                                    Please enter valid time
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div fxLayout="column" fxLayoutGap="8px">
                                        <span class="datetime">Evaluation</span>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [min]="RFxFormGroup.get('ResponseStartDate').value"
                                                    [max]="RFxFormGroup.get('ValidityEndDate').value"
                                                    [matDatepicker]="picker13" formControlName="EvaluationStartDate"
                                                    fxFlex placeholder="Start Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker13.open()">
                                                <mat-datepicker #picker13></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('EvaluationStartDate').touched && RFxFormGroup.get('EvaluationStartDate').hasError('required')">
                                                    Evaluation Start Date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker12"
                                                    formControlName="EvaluationStartTime" fxFlex
                                                    placeholder="Start Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker12></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('EvaluationStartTime').touched && RFxFormGroup.get('EvaluationStartTime').hasError('required')">
                                                    Evaluation Start Time is required
                                                </mat-error>
                                                <mat-error
                                                    *ngIf="!RFxFormGroup.get('EvaluationStartTime').hasError('required') &&
                                                RFxFormGroup.get('EvaluationStartTime').hasError('EvalStartTimeValidator')">
                                                    Please enter valid time
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="24px">
                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [min]="RFxFormGroup.get('ResponseEndDate').value"
                                                    [max]="RFxFormGroup.get('ValidityEndDate').value"
                                                    [matDatepicker]="picker5" formControlName="EvaluationEndDate" fxFlex
                                                    placeholder="End Date">
                                                <img src="assets/images/rfq/date_picker.svg" width="16px"
                                                    class="clickable" (click)="picker5.open()">
                                                <mat-datepicker #picker5></mat-datepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('EvaluationEndDate').touched && RFxFormGroup.get('EvaluationEndDate').hasError('required')">
                                                    Evaluation End Date is required
                                                </mat-error>
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" fxFlex="163px" class="rfx-form-field">
                                                <input matInput [ngxTimepicker]="picker8"
                                                    formControlName="EvaluationEndTime" fxFlex placeholder="End Time">
                                                <img src="assets/images/rfq/time_picker.svg" width="16px">
                                                <ngx-material-timepicker #picker8></ngx-material-timepicker>
                                                <mat-error
                                                    *ngIf="RFxFormGroup.get('EvaluationEndTime').touched && RFxFormGroup.get('EvaluationEndTime').hasError('required')">
                                                    Evaluation End Time is required
                                                </mat-error>
                                                <mat-error
                                                    *ngIf="!RFxFormGroup.get('EvaluationEndTime').hasError('required') &&
                                                RFxFormGroup.get('EvaluationEndTime').hasError('EvalEndTimeValidator')">
                                                    Please enter valid time
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[1]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>System Criteria</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                <label class="tab-title">System Criterias</label>
                            </div>
                            <form [formGroup]="ICFormGroup" autocomplete="off">
                                <table mat-table [dataSource]="RatingDetailsDataSource" formArrayName="ItemCriterias"
                                    matSort class="py-10">
                                    <ng-container matColumnDef="Criteria">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Criteria </th>
                                        <td mat-cell *matCellDef="let element;index as i" [formGroupName]="i">
                                            {{ICFormGroup.get('ItemCriterias')?.controls[i]?.get('Criteria')?.value}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Weightage">
                                        <th mat-header-cell *matHeaderCellDef>Weightage</th>
                                        <td mat-cell *matCellDef="let element;index as i;" [formGroupName]="i">
                                            <mat-form-field class="tb_formfield" style="width: 40%;">
                                                <input matInput oninput="this.value = Math.abs(this.value)"
                                                    formControlName="Weightage" type="number" (change)="ItemPriority()">
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Consider">
                                        <th mat-header-cell *matHeaderCellDef>Priority</th>
                                        <td mat-cell *matCellDef="let element;index as i;" [formGroupName]="i">
                                            <mat-form-field class="tb_formfield" style="width: 100%;">
                                                <mat-select formControlName="Consider" disableOptionCentering
                                                    panelClass="myPanelClass">
                                                    <mat-option value="1">High</mat-option>
                                                    <mat-option value="0">Low</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="RatingDetailsDisplayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: RatingDetailsDisplayedColumns;"></tr>
                                </table>
                            </form>
                        </div>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[2]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Evaluation Criteria</span>
                        </div>
                        <div class="square px-8" [ngStyle]="{'background-color':selectedIndex==2?'#ffffff':'#18a421'}"
                            fxLayoutAlign="center center" *ngIf="CompletedSteps[2]">
                            <span class="tbcount"
                                [ngStyle]="{'color':selectedIndex==2?'#5f2cff':'#ffffff'}">{{EvaluationDetails.length}}</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                <label class="tab-title">Evaluation Criterias</label>
                                <div fxLayout="row" fxLayoutGap="1rem">
                                    <button *ngIf="Rfxheader.Status=='1'" mat-button [matMenuTriggerFor]="menu"
                                        class="createbtn">Choose from Template</button>
                                    <mat-menu #menu="matMenu">
                                        <button style="width: 170px;" *ngFor="let template of CriteriaTemplates"
                                            mat-menu-item class="menu-item"
                                            (click)="SetCriteriaTemplate(template)">{{template.Description}}</button>
                                    </mat-menu>
                                    <button mat-button color="primary" class="createbtn" (click)="CreateCriteria()"
                                        *ngIf="Rfxheader.Status=='1'">Add</button>
                                </div>

                            </div>
                            <table mat-table [dataSource]="EvaluationDetailsDataSource" matSort class="py-10">
                                <ng-container matColumnDef="Description">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Description </th>
                                    <td mat-cell *matCellDef="let element"> {{element.Text}} </td>
                                </ng-container>

                                <ng-container matColumnDef="Action">
                                    <th mat-header-cell *matHeaderCellDef style="text-align: right;"> Action
                                    </th>
                                    <td mat-cell *matCellDef="let element;index as i;" style="text-align: right;">
                                        <div *ngIf="Rfxheader.Status=='1'">
                                            <img src="assets/images/edit_blue.png" (click)="OpenCriteriaDialog(element)"
                                                class="clickable">
                                            <img style="margin-left: 9px;" (click)="DeleteCriteria(i)" class="clickable"
                                                src="assets/images/delete1.png">
                                        </div>
                                        <span *ngIf="Rfxheader.Status!='1'" style="text-align: right;">Released</span>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="EvaluationDetailsDisplayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: EvaluationDetailsDisplayedColumns;"></tr>
                            </table>
                        </div>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[3]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Item</span>
                        </div>
                        <div class="square px-8" [ngStyle]="{'background-color':selectedIndex==3?'#ffffff':'#18a421'}"
                            fxLayoutAlign="center center" *ngIf="CompletedSteps[3]">
                            <span class="tbcount"
                                [ngStyle]="{'color':selectedIndex==3?'#5f2cff':'#ffffff'}">{{ItemDetails.length}}</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                <label class="tab-title">Items</label>
                                <button mat-button color="primary" class="createbtn" (click)="CreateItem()"
                                    *ngIf="Rfxheader.Status=='1'">Add</button>
                            </div>
                            <table mat-table [dataSource]="ItemDetailsDataSource" matSort class="py-10">
                                <ng-container matColumnDef="Material">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Material </th>
                                    <td mat-cell *matCellDef="let element"> {{element.Material}} </td>
                                </ng-container>

                                <ng-container matColumnDef="MaterialText">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef>Material text</th>
                                    <td mat-cell *matCellDef="let element"> {{element.MaterialText}} </td>
                                </ng-container>

                                <ng-container matColumnDef="TotalQty">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Total qty </th>
                                    <td mat-cell *matCellDef="let element" class="qty"> {{element.TotalQty}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="PerScheduleQty">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Per schedule qty </th>
                                    <td mat-cell *matCellDef="let element" class="qty"> {{element.PerScheduleQty}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="TotalSchedules">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> No. of schedules </th>
                                    <td mat-cell *matCellDef="let element" class="qty"> {{element.TotalSchedules}}</td>
                                </ng-container>

                                <ng-container matColumnDef="UOM">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> UOM </th>
                                    <td mat-cell *matCellDef="let element"> {{element.UOM}}</td>
                                </ng-container>

                                <ng-container matColumnDef="IncoTerm">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Incoterm </th>
                                    <td mat-cell *matCellDef="let element"> {{element.IncoTerm}}</td>
                                </ng-container>

                                <ng-container matColumnDef="Action">
                                    <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action
                                    </th>
                                    <td mat-cell *matCellDef="let element;index as i;" style="text-align: center;">
                                        <div *ngIf="Rfxheader.Status=='1'">
                                            <img src="assets/images/edit_blue.png" (click)="OpenItemDialog(element)"
                                                class="clickable">
                                            <img style="margin-left: 9px;" (click)="DeleteItem(i)" class="clickable"
                                                src="assets/images/delete1.png">
                                        </div>
                                        <span *ngIf="Rfxheader.Status!='1'" style="text-align: center;">Released</span>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="ItemsDetailsDisplayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: ItemsDetailsDisplayedColumns;"></tr>
                            </table>
                        </div>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[4]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Partners</span>
                        </div>
                        <div class="square px-8" [ngStyle]="{'background-color':selectedIndex==4?'#ffffff':'#18a421'}"
                            fxLayoutAlign="center center" *ngIf="CompletedSteps[4]">
                            <span class="tbcount"
                                [ngStyle]="{'color':selectedIndex==4?'#5f2cff':'#ffffff'}">{{PartnerDetails.length}}</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                <label class="tab-title">Partners</label>
                                <button mat-button color="primary" class="createbtn" (click)="CreatePartner()"
                                    *ngIf="Rfxheader.Status=='1'">Add</button>
                            </div>
                            <table mat-table [dataSource]="PartnerDetailsDataSource" matSort class="py-10">
                                <ng-container matColumnDef="Type">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Type </th>
                                    <td mat-cell *matCellDef="let element"> {{element.Type}} </td>
                                </ng-container>

                                <ng-container matColumnDef="Usertables">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> User tables </th>
                                    <td mat-cell *matCellDef="let element"> {{element.User}} </td>
                                </ng-container>

                                <ng-container matColumnDef="Action">
                                    <th mat-header-cell *matHeaderCellDef style="text-align: right;"> Action
                                    </th>
                                    <td mat-cell *matCellDef="let element;index as i;" style="text-align: right;">
                                        <div *ngIf="Rfxheader.Status=='1'">
                                            <img (click)="DeletePartner(i)" class="clickable"
                                                src="assets/images/delete1.png">
                                        </div>
                                        <span *ngIf="Rfxheader.Status!='1'" style="text-align: right;">Released</span>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="PartnerDetailsDisplayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: PartnerDetailsDisplayedColumns;"></tr>
                            </table>
                        </div>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[5]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Vendors</span>
                        </div>
                        <div class="square px-8" [ngStyle]="{'background-color':selectedIndex==5?'#ffffff':'#18a421'}"
                            fxLayoutAlign="center center" *ngIf="CompletedSteps[5]">
                            <span class="tbcount"
                                [ngStyle]="{'color':selectedIndex==5?'#5f2cff':'#ffffff'}">{{VendorDetails.length}}</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                <div fxFlex=50>
                                    <label class="tab-title">Vendors</label>
                                </div>
                                <div fxFlex=50 fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="1rem">
                                    <button mat-button color="primary" class="createbtn"
                                        (click)="OpenSelectVendorDialog(VendorDetails)"
                                        *ngIf="Rfxheader.Status=='1'">Select</button>
                                    <button mat-button color="primary" class="createbtn" (click)="CreateVendor()"
                                        *ngIf="Rfxheader.Status=='1'">Add</button>
                                </div>
                            </div>
                            <table mat-table [dataSource]="VendorDetailsDataSource" matSort class="py-10">

                                <ng-container matColumnDef="Type">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Type </th>
                                    <td mat-cell *matCellDef="let element"> {{element.Type}} </td>
                                </ng-container>

                                <ng-container matColumnDef="VendorName">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> Vendor name </th>
                                    <td mat-cell *matCellDef="let element">
                                        <div fxLayoutAlign="start center" style="width: 100%;">
                                            <span>{{element.VendorName}}</span>
                                            <mat-icon class="flag" *ngIf="IsNewVendor(element)">flag</mat-icon>
                                        </div>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="GSTNumber">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> GST Number </th>
                                    <td mat-cell *matCellDef="let element"> {{element.GSTNumber}} </td>
                                </ng-container>

                                <ng-container matColumnDef="City">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef> City </th>
                                    <td mat-cell *matCellDef="let element"> {{element.City}} </td>
                                </ng-container>

                                <ng-container matColumnDef="Action">
                                    <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action
                                    </th>
                                    <td mat-cell *matCellDef="let element;index as i;" style="text-align: center;">
                                        <div *ngIf="Rfxheader.Status=='1'">
                                            <img (click)="DeleteVendor(i)" class="clickable"
                                                src="assets/images/delete1.png">
                                        </div>
                                        <span *ngIf="Rfxheader.Status!='1'" style="text-align: center;">Released</span>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="VendorDetailsDisplayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: VendorDetailsDisplayedColumns;"></tr>
                            </table>
                        </div>
                    </mat-card>
                </mat-tab>
                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[6]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Questions</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div>
                                <div fxLayout="row" fxLayoutAlign="space-between center" class="pb-24">
                                    <label class="tab-title">Questions</label>
                                    <div fxLayout="row" fxLayoutGap="1rem">
                                        <button *ngIf="Rfxheader.Status=='1'" mat-button [matMenuTriggerFor]="menu1"
                                            class="createbtn">Choose from Template</button>
                                        <mat-menu #menu1="matMenu">
                                            <button style="width: 170px;" *ngFor="let template of QuestionTemplates"
                                                mat-menu-item class="menu-item"
                                                (click)="SetQuestionTemplate(template)">{{template.Description}}</button>
                                        </mat-menu>
                                        <button mat-button color="primary" class="createbtn" (click)="CreateQuestion()"
                                            *ngIf="Rfxheader.Status=='1'">Add</button>
                                    </div>
                                </div>
                                <table mat-table [dataSource]="ODDetailsDataSource" matSort class="py-10">
                                    <ng-container matColumnDef="Question">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Question </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Qusetion}} </td>
                                    </ng-container>

                                    <ng-container matColumnDef="AnswerType">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Answer type </th>
                                        <td mat-cell *matCellDef="let element"> {{GetAnswerType(element.AnswerType)}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Action">
                                        <th mat-header-cell *matHeaderCellDef style="text-align: right;"> Action
                                        </th>
                                        <td mat-cell *matCellDef="let element;index as i;" style="text-align: right;">
                                            <div *ngIf="Rfxheader.Status=='1'">
                                                <img src="assets/images/edit_blue.png"
                                                    (click)="OpenQuestionDialog(element)" class="clickable">
                                                <img style="margin-left: 9px;" (click)="DeleteQuetion(i)"
                                                    class="clickable" src="assets/images/delete1.png">
                                            </div>
                                            <span *ngIf="Rfxheader.Status!='1'"
                                                style="text-align: right;">Released</span>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="ODDetailsDisplayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: ODDetailsDisplayedColumns;"></tr>
                                </table>
                            </div>
                        </div>
                    </mat-card>
                </mat-tab>

                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[7]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Documents</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div>
                                <div fxLayout="row" fxLayoutAlign="space-between center" class="py-24">
                                    <label class="tab-title">Documents</label>
                                    <button mat-button color="primary" class="createbtn" (click)="CreateDocument()"
                                        *ngIf="Rfxheader.Status=='1'">Add</button>
                                </div>
                                <table mat-table [dataSource]="ODAttachDetailsDataSource" matSort class="py-10">
                                    <ng-container matColumnDef="DocumentTitle">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Document title </th>
                                        <td mat-cell *matCellDef="let element"> {{element.DocumentTitle}} </td>
                                    </ng-container>

                                    <ng-container matColumnDef="DocumentName">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Document </th>
                                        <td mat-cell *matCellDef="let element">
                                            <a (click)="OpenAttachment(element.DocumentName)"
                                                style="cursor: pointer;color: #5f2cff;">{{element.DocumentName}}</a>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Action">
                                        <th mat-header-cell *matHeaderCellDef style="text-align: right;"> Action
                                        </th>
                                        <td mat-cell *matCellDef="let element;index as i;" style="text-align: right;">
                                            <div *ngIf="Rfxheader.Status=='1'">
                                                <img (click)="DeleteAttachment(i)" class="clickable"
                                                    src="assets/images/delete1.png">
                                            </div>
                                            <span *ngIf="Rfxheader.Status!='1'"
                                                style="text-align: right;">Released</span>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="ODAttachDetailsDisplayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: ODAttachDetailsDisplayedColumns;"></tr>
                                </table>
                            </div>
                        </div>
                    </mat-card>
                </mat-tab>

                <mat-tab [disabled]="!IsComplete()">
                    <ng-template mat-tab-label>
                        <div fxLayoutAlign="start center" fxLayoutGap="1rem">
                            <mat-icon style="margin-left: 1rem;"
                                [ngStyle]="{'color':CompletedSteps[8]?'#18a421':'#acacac'}">check_circle</mat-icon>
                            <span>Text</span>
                        </div>
                    </ng-template>
                    <mat-card class="card">
                        <div fxLayout="column">
                            <div fxLayout="column" class="my-24" fxLayoutGap="1rem">
                                <div fxLayout="row" fxLayoutAlign="space-between center">
                                    <label class="tab-title">Remarks</label>
                                </div>
                                <mat-form-field appearance="outline">
                                    <textarea matInput fxFlex [formControl]="Remarks"
                                        [disabled]="Rfxheader.Status!='1'"></textarea>
                                    <mat-error *ngIf="Remarks.touched && Remarks.hasError('required')">Please enter your
                                        remarks</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </mat-card>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
    <div class="footer px-24" fxLayout="row" fxLayoutAlign="space-between center"
        *ngIf="Rfxheader.Status=='1' || RFxID==null">
        <div fxFlex fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="24px">
            <span>
                <span class="processtxt">Process completed : </span>
                <span class="processcount">{{GetCompletedSteps()}}</span>
            </span>
            <mat-progress-bar class="progressbar" mode="determinate" [value]="GetProgress()">
            </mat-progress-bar>
            <div fxLayoutAlign="center center" class="count-box">
                <span class="count-percentage">{{GetProgress() | number: '1.0-0'}}%</span>
            </div>
        </div>
        <div fxFlex="144px" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="24px" *ngIf="!IsComplete()">
            <span fxLayoutAlign="start center" fxLayoutGap="8px" *ngIf="selectedIndex!=0" (click)="PreviousClicked(selectedIndex)"
                class="prevnxtbtn clickable">
                <img src="assets/images/rfq/nextprev.svg">
                <span>Previous</span>
            </span>
            <div fxFlex></div>
            <span fxLayoutAlign="center center" fxLayoutGap="8px" *ngIf="selectedIndex!=8" (click)="NextClicked(selectedIndex)"
                class="prevnxtbtn clickable">
                <span>Next</span>
                <img src="assets/images/rfq/nextprev.svg" style="transform: rotate(180deg);">
            </span>
        </div>
        <div fxFlex="144px" *ngIf="Rfxheader.Status=='1' && IsComplete()" fxLayout="row" fxLayoutAlign="end center">
            <span fxLayoutAlign="center center" fxLayoutGap="8px" *ngIf="Permission=='3' || Permission=='2'" (click)="SaveRFxClicked(true)"
                class="prevnxtbtn clickable">
                <span>Release</span>
                <img src="assets/images/rfq/releasetick.svg">
            </span>
        </div>

    </div>
    <mat-progress-spinner *ngIf="isProgressBarVisibile" class="progressBarPostion" color="accent" mode="indeterminate">
    </mat-progress-spinner>
    <div id="overlay" *ngIf="isProgressBarVisibile"></div>
</div>