<div>
  <mat-toolbar class="toolbar1">
    <p class="add_criteria">Evaluate Item</p>
    <img (click)="dialogRef.close()" style="cursor: pointer;" src="assets/images/cancel1.png">
  </mat-toolbar>
</div>
<mat-dialog-content [formGroup]="DialogueFormGroup">
  <div style="padding: 2rem;" fxLayout="column">
    <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="3%">

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Item</mat-label>
        <input matInput fxFlex formControlName="Item" autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Material</mat-label>
        <mat-select fxFlex formControlName="material" [disabled]="true">
          <mat-option *ngFor="let item of MaterialMaster" [value]="item.Material">{{item.Material}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Material Text</mat-label>
        <input matInput formControlName="material_text" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>UOM</mat-label>
        <input matInput formControlName="Uom" maxlength="3" size="3" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Total Qty</mat-label>
        <input matInput formControlName="TotalQty" type="number" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Per Schedule Qty</mat-label>
        <input matInput formControlName="per_schedule_qty" type="number" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Total Schedules</mat-label>
        <input matInput formControlName="totalSchedules" type="number" fxFlex autocomplete="off">

      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Bidding Price Low</mat-label>
        <input matInput formControlName="LowPrice" type="number" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Bidding Price High</mat-label>
        <input matInput formControlName="HighPrice" type="number" fxFlex autocomplete="off">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Interval</mat-label>
        <input matInput type="number" fxFlex autocomplete="off" formControlName="Interval">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Incoterm</mat-label>
        <input matInput max="2" size="2" fxFlex autocomplete="off" formControlName="incoterm">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Lead Time</mat-label>
        <input matInput type="number" fxFlex autocomplete="off" formControlName="LeadTime">
      </mat-form-field>


      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Notes</mat-label>
        <input matInput max="2" size="2" fxFlex autocomplete="off" formControlName="Notes">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Price</mat-label>
        <input matInput fxFlex autocomplete="off" type="number" formControlName="Price">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>USP Remark</mat-label>
        <input matInput fxFlex autocomplete="off" formControlName="USPRemark">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Price Rating</mat-label>
        <input matInput formControlName="PriceRating" fxFlex autocomplete="off" type="number">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Lead Time Rating</mat-label>
        <input matInput type="number" fxFlex autocomplete="off" formControlName="LeadTimeRating">
      </mat-form-field>

      <mat-form-field fxFlex=30 style="font-size: 14px;" appearance="outline">
        <mat-label>Lead Time is acceptable</mat-label>
        <mat-select formControlName="LeadTimeAccept" fxFlex>
          <mat-option *ngFor="let type of types" [value]="type">{{type}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="DialogueFormGroup.get('LeadTimeAccept').value=='No'" fxFlex=30 style="font-size: 14px;"
        appearance="outline">
        <mat-label>Remark</mat-label>
        <input matInput formControlName="LeadTimeRemark" fxFlex autocomplete="off">
      </mat-form-field>

    </div>
    <div fxLayout="row">
      <div fxFlex="20" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <p class="attachment">RFx Attachment</p>
        <span matBadgeSize="small" matBadgeColor="accent" matBadgeOverlap="false" [matBadge]="RFxItemAttachment.length">
          <img (click)="openAttachmentViewDialog(rfxitem.RFxID,RFxItemAttachment,false)"
            style="width: 20px;cursor: pointer;" src="assets/images/attachment.png"></span>
      </div>

      <div fxFlex="20" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <p class="attachment">Response Attachment</p>
        <span matBadgeSize="small" matBadgeColor="accent" [matBadge]="ResItemAttachment.length" matBadgeOverlap="false">
          <img (click)="openAttachmentViewDialog(rfxitem.RFxID,ResItemAttachment,true)"
            style="width: 20px;cursor: pointer;" src="assets/images/attachment.png">
        </span>
      </div>
    </div>
    <div>
      <table mat-table [dataSource]="EvaluationDetailsDataSource" class="mat-elevation-z8" matSort>

        <!-- Position Column -->
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef style=" font-size: 13px;
                            font-weight: 500;
                            font-stretch: normal;
                            font-style: normal;
                            line-height: 1.5;
                            letter-spacing: normal;
                            text-align: left;
                            color: #595d6e;" class="Rectangle-4510"> S.No </th>
          <td mat-cell style="font-size: 12px;" *matCellDef="let element;let i = index;">{{i+1}}
          </td>
        </ng-container>

        <!-- Criteria Column -->
        <ng-container matColumnDef="Criteria">
          <th mat-header-cell mat-sort-header style=" font-size: 13px;
                            font-weight: 500;
                            font-stretch: normal;
                            font-style: normal;
                            line-height: 1.5;
                            letter-spacing: normal;
                            text-align: left;
                            color: #595d6e;" class="Rectangle-4510" *matHeaderCellDef> Criteria
          </th>
          <td mat-cell style="font-size: 12px;" *matCellDef="let element">{{element.CriteriaID}}</td>
        </ng-container>

        <!-- Description Column -->
        <ng-container matColumnDef="Description">
          <th mat-header-cell style=" font-size: 13px;
                            font-weight: 500;
                            font-stretch: normal;
                            font-style: normal;
                            line-height: 1.5;
                            letter-spacing: normal;
                            text-align: center;
                            color: #595d6e;" class="Rectangle-4510" *matHeaderCellDef>
            Description </th>
          <td mat-cell style="font-size: 12px;text-align: center;" *matCellDef="let element">{{element.Text}} </td>
        </ng-container>

        <!-- <ng-container matColumnDef="OverallRating">
          <th mat-header-cell style=" font-size: 13px;
                              font-weight: 500;
                              font-stretch: normal;
                              font-style: normal;
                              line-height: 1.5;
                              letter-spacing: normal;
                              text-align: center;
                              color: #595d6e;" class="Rectangle-4510" *matHeaderCellDef>Overall Rating </th>
          <td mat-cell *matCellDef="let element;index as i;" style="text-align: center;">
            <div>
              <star-rating [value]="EvalHcViews[i].Rating" checkedcolor="gold" uncheckedcolor="#b9bdbb" size="20px"
                readonly="true"></star-rating>
            </div>
          </td>
        </ng-container> -->

        <ng-container matColumnDef="ItemRating">
          <th mat-header-cell style=" font-size: 13px;
                              font-weight: 500;
                              font-stretch: normal;
                              font-style: normal;
                              line-height: 1.5;
                              letter-spacing: normal;
                              text-align: center;
                              color: #595d6e;" class="Rectangle-4510" *matHeaderCellDef>Rating </th>
          <td mat-cell *matCellDef="let element;index as i;" style="text-align: center;">
            <div>
              <star-rating [value]="EvalICs[i].Rating" checkedcolor="gold" uncheckedcolor="#b9bdbb" size="20px"
                [readonly]="IsReadOnly" (rate)="OnItemRating($event,i)"></star-rating>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="EvaluationDetailsDisplayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: EvaluationDetailsDisplayedColumns;"></tr>
      </table>
    </div>

  </div>

</mat-dialog-content>
<mat-dialog-actions fxLayoutAlign="center" style="box-shadow: 0 -3px 6px 0 rgba(0, 0, 0, 0.1);">
  <button *ngIf="!data.IsReadOnly" mat-button class="cl_button1" (click)="Save()"><span class="add">Save</span>
  </button>
</mat-dialog-actions>